(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],p=0,f=[];p<o.length;p++)s=o[p],i[s]&&f.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("64a9"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4 flex flex-wrap items-start justify-around",attrs:{id:"app"}},[n("div",{staticClass:"block"},[e._v("\n    Status: "+e._s(e.status)+"\n  ")]),n("GenerateKeys"),n("Encrypt"),n("Decrypt"),n("files")],1)},a=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4 w-full flex justify-center text-lg"},[e.generating?n("div",[n("span",[e._v("Generating Keysâ€¦")])]):n("div",[n("button",{staticClass:"bg-purple-700 hover:bg-purple-500 p-4 rounded-lg focus:outline-none",on:{click:e.click}},[e._v(e._s(e.label))])])])},o=[],c={name:"GenerateKeys",computed:{hasKeys:function(){return this.$store.getters.keysPresent},label:function(){return this.hasKeys?"Remove Keys":"GenerateKeys"},generating:function(){return this.$store.state.isGeneratingKeys}},methods:{click:function(){this.hasKeys?this.clear():this.generate()},generate:function(){var e={worker:this.$worker,size:1024};this.$store.dispatch("jsencrypt-generate-keys",e)},clear:function(){this.$store.commit("clear-keys")}}},l=c,u=n("2877"),p=Object(u["a"])(l,s,o,!1,null,null,null),f=p.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4 w-1/2 flex justify-center flex-col"},[n("h1",{staticClass:"text-center text-2xl"},[e._v("Encrypt")]),e.hasKey?n("div",[n("Key",{attrs:{plaintext:e.key,label:"Encryption Key"},on:{clear:e.clearKey}}),n("Uploader",{attrs:{label:"Upload a file to encrypt"},on:{upload:e.onUpload}})],1):n("div",[n("Uploader",{attrs:{label:"Upload an encryption key"},on:{upload:e.onKeyUpload}})],1)])},d=[],h=(n("7f7f"),n("96cf"),n("3b8d")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"key"},[n("h3",{staticClass:"text-lg"},[e._v(e._s(e.label))]),e.shown?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.plaintext,expression:"plaintext"}],staticClass:"py-2 w-full",attrs:{readonly:""},domProps:{value:e.plaintext},on:{input:function(t){t.target.composing||(e.plaintext=t.target.value)}}}):e._e(),n("div",{staticClass:"py-2"},[e.shown?n("a",{attrs:{href:"#hide-key"},on:{click:function(t){return t.preventDefault(),e.hide(t)}}},[e._v("Hide")]):n("a",{attrs:{href:"#show-key"},on:{click:function(t){return t.preventDefault(),e.show(t)}}},[e._v("Show")]),n("a",{staticClass:"px-4",attrs:{href:"#clear-key"},on:{click:function(t){return t.preventDefault(),e.clear(t)}}},[e._v("Clear")]),n("a",{attrs:{href:e.buildData(),download:e.downloadName()}},[e._v("Download")])])])},v=[],g=(n("a481"),{name:"Key",props:["plaintext","label"],data:function(){return{shown:!1}},methods:{buildData:function(){return"data:text/plain;base64,".concat(btoa(this.plaintext))},downloadName:function(){return this.label.toLowerCase().replace(" ",".")},clear:function(){this.$emit("clear")},show:function(){this.shown=!0},hide:function(){this.shown=!1}}}),w=g,x=Object(u["a"])(w,m,v,!1,null,null,null),k=x.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"py-4 flex flex-col"},[n("label",[e._v(e._s(e.label))]),n("input",{staticClass:"py-2",attrs:{type:"file"},on:{change:e.onChange}})])},j=[],K={name:"Uploader",props:["label"],methods:{onChange:function(e){var t=e.target.files[0];this.$emit("upload",t)}}},_=K,$=Object(u["a"])(_,b,j,!1,null,null,null),O=$.exports,C=n("8634"),S=n.n(C),E={name:"Encrypt",components:{Key:k,Uploader:O},computed:{hasKey:function(){return!!this.$store.state.publicKey},isGenerating:function(){return this.$store.state.isGeneratingKeys},key:function(){return this.$store.state.publicKey}},methods:{fileToBinaryString:function(e){var t=new FileReader;return new Promise(function(n){t.addEventListener("load",function(e){var t=e.target.result;n(t)}),t.readAsBinaryString(e)})},onUpload:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.size/1024>500)){e.next=2;break}return e.abrupt("return",alert("There is a 500Kb limit.  Larger files start to use a ton of memory and can freeze the browser."));case 2:return e.next=4,this.fileToBinaryString(t);case 4:return n=e.sent,e.next=7,this.$store.dispatch("aes-generate-key",{worker:this.$worker,size:192});case 7:return r=e.sent,e.next=10,this.$store.dispatch("aes-encrypt",{key:r,plaintext:n,worker:this.$worker});case 10:return i=e.sent,e.next=13,this.$store.dispatch("jsencrypt-encrypt",{key:this.key,worker:this.$worker,plaintext:r.join(",")});case 13:a=e.sent,s={integrity:S()(i),name:t.name,type:t.type,size:t.size,encrypted:!0,cipherkey:a,ciphertext:i},this.$store.commit("add-file",s);case 16:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onKeyUpload:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fileToBinaryString(t);case 2:n=e.sent,this.$store.commit("public-key",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),clearKey:function(){this.$store.commit("public-key","")}}},U=E,D=Object(u["a"])(U,y,d,!1,null,null,null),P=D.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4 w-1/2 flex justify-center flex-col"},[n("h1",{staticClass:"text-center text-2xl"},[e._v("Decrypt")]),e.hasKey?n("div",[n("Key",{attrs:{plaintext:e.key,label:"Decryption Key"}}),n("Uploader",{attrs:{label:"Upload a file to decrypt"},on:{upload:e.onUpload}})],1):n("div",[n("Uploader",{attrs:{label:"Upload a decryption key"},on:{upload:e.onKeyUpload}})],1)])},G=[],R=(n("28a5"),n("34ef"),{name:"Decrypt",components:{Key:k,Uploader:O},computed:{hasKey:function(){return!!this.$store.state.privateKey},isGenerating:function(){return this.$store.state.isGeneratingKeys},key:function(){return this.$store.state.privateKey}},methods:{fileToText:function(e){var t=new FileReader;return new Promise(function(n){t.addEventListener("load",function(e){var t=e.target.result;n(t)}),t.readAsText(e)})},onUpload:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fileToText(t);case 2:return n=e.sent,r=JSON.parse(atob(n)),e.next=6,this.$store.dispatch("jsencrypt-decrypt",{worker:this.$worker,key:this.key,ciphertext:r.cipherkey});case 6:return i=e.sent,a=new Uint8Array(i.split(",")),e.next=10,this.$store.dispatch("aes-decrypt",{worker:this.$worker,key:a,ciphertext:r.ciphertext});case 10:s=e.sent,delete r.cipherkey,delete r.ciphertext,r.plaintext=s,r.encrypted=!1,this.$store.commit("add-file",r);case 16:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),onKeyUpload:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fileToText(t);case 2:n=e.sent,this.$store.commit("private-key",n);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}}),z=R,M=Object(u["a"])(z,T,G,!1,null,null,null),A=M.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"p-4 w-full"},[n("h1",{staticClass:"text-2xl"},[e._v("Files")]),e.files.length?e._e():n("p",{staticClass:"py-2 text-lg"},[e._v('\n    No files yet.  Try clicking on "Generate Keys" and Encrypt a file.  \n    If you already have keys and files download, try uploading them to decrypt.\n  ')]),n("ul",e._l(e.files,function(t){return n("li",{key:t.id,staticClass:"py-2"},[n("div",{staticClass:"flex justify-between"},[n("span",{staticClass:"w-1/3"},[e._v("\n          "+e._s(t.name)+"\n        ")]),t.encrypted?n("span",[e._v("Encrypted File")]):n("span",[e._v("Decrypted File")]),n("a",{attrs:{href:e.buildData(t),download:e.fileName(t)}},[e._v("Download")]),n("a",{attrs:{href:"#remove-file-from-list"},on:{click:function(n){return n.preventDefault(),e.remove(t.id)}}},[e._v("X")])])])}),0)])},N=[],F={name:"Files",computed:{files:function(){return this.$store.state.files}},methods:{fileName:function(e){return e.encrypted?e.integrity:e.name},buildData:function(e){return e.encrypted?"data:text/plain;charset=utf-8,".concat(encodeURIComponent(btoa(JSON.stringify(e)))):"data:".concat(e.type,";base64,").concat(btoa(e.plaintext))},remove:function(e){this.$store.commit("remove-file",e)}}},J=F,L=Object(u["a"])(J,B,N,!1,null,null,null),I=L.exports,H={name:"app",components:{GenerateKeys:f,Encrypt:P,Decrypt:A,Files:I},computed:{status:function(){return this.$store.state.generatingKeys?"Generating keys&hellip;":this.$store.state.generatingAesKey?"Generating AES key&hellip;":this.$store.state.encrypting?"Encrypting...":this.$store.state.decrypting?"Decrypting&hellip;":"Idle"}}},X=H,q=(n("034f"),Object(u["a"])(X,i,a,!1,null,null,null)),Q=q.exports,V=(n("ac6a"),n("7514"),n("2f62"));r["a"].use(V["a"]);var W=new V["a"].Store({state:{generatingKeys:!1,generatingAesKey:!1,encrypting:!1,eecrypting:!1,privateKey:"",publicKey:"",files:[]},mutations:{"private-key":function(e,t){e.privateKey=t},"public-key":function(e,t){e.publicKey=t},"clear-keys":function(e){e.publicKey="",e.privateKey=""},"generating-keys":function(e,t){e.isGeneratingKeys=t},"add-file":function(e,t){delete t.id,t.id=(new Date).getTime(),e.files.push(t)},"remove-file":function(e,t){var n=e.files.find(function(e){return e.id===t});n&&e.files.splice(e.files.indexOf(n),1)},encrypting:function(e,t){e.encrypting=t},decrypting:function(e,t){e.decrypting=t},"generating-aes-key":function(e,t){e.generatingAesKey=t}},actions:{"jsencrypt-generate-keys":function(e,t){var n=e.commit,r=t.size,i=t.worker;n("generating-keys",!0),i.run(function(e){self.window=self,self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js");var t=new JSEncrypt({default_key_size:e});return{publicKey:t.getPublicKey(),privateKey:t.getPrivateKey()}},[r]).then(function(e){n("public-key",e.publicKey),n("private-key",e.privateKey),n("generating-keys",!1)})},"jsencrypt-encrypt":function(e,t){var n=e.commit,r=t.key,i=t.plaintext,a=t.worker;n("encrypting",!0);var s=new Promise(function(e){a.run(function(e,t){self.window=self,self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js");var n=new JSEncrypt;return n.setKey(e),n.encrypt(t)},[r,i]).then(function(t){return e(t)})});return s.then(function(){n("encrypting",!1)}),s},"jsencrypt-decrypt":function(e,t){var n=e.commit,r=t.key,i=t.ciphertext,a=t.worker;n("decrypting",!0);var s=new Promise(function(e){a.run(function(e,t){self.window=self,self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js");var n=new JSEncrypt;return n.setKey(e),n.decrypt(t)},[r,i]).then(function(t){return e(t)})});return s.then(function(){n("decrypting",!1)}),s},"aes-generate-key":function(e,t){var n=e.commit,r=t.size,i=t.worker;n("generating-aes-key",!0);var a=r/8,s=new Promise(function(e){i.run(function(e){var t=new Uint8Array(e);return t.forEach(function(e,n){t[n]=Math.floor(Math.random()*Math.floor(99))}),t},[a]).then(function(t){return e(t)})});return s.then(function(){n("generating-aes-key",!1)}),s},"aes-encrypt":function(e,t){var n=e.commit,r=t.key,i=t.plaintext,a=t.worker;n("encrypting",!0);var s=new Promise(function(e){a.run(function(e,t){self.window=self,self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/aes-js/3.1.2/index.min.js");var n=new aesjs.ModeOfOperation.ctr(e),r=n.encrypt(aesjs.utils.utf8.toBytes(t));return aesjs.utils.hex.fromBytes(r)},[r,i]).then(function(t){return e(t)})});return s.then(function(){n("encrypting",!1)}),s},"aes-decrypt":function(e,t){var n=e.commit,r=t.key,i=t.ciphertext,a=t.worker;n("decrypting",!0);var s=new Promise(function(e){a.run(function(e,t){self.window=self,self.importScripts("https://cdnjs.cloudflare.com/ajax/libs/aes-js/3.1.2/index.min.js");var n=new aesjs.ModeOfOperation.ctr(e),r=aesjs.utils.hex.toBytes(t),i=n.decrypt(r),a=aesjs.utils.utf8.fromBytes(i);return a},[r,i]).then(function(t){return e(t)})});return s.then(function(){n("decrypting",!1)}),s}},getters:{keysPresent:function(e){return e.publicKey.length&&e.privateKey.length}}}),Y=n("28bd");r["a"].config.productionTip=!1,r["a"].use(Y["a"]),new r["a"]({store:W,render:function(e){return e(Q)}}).$mount("#app")},"64a9":function(e,t,n){}});
//# sourceMappingURL=app.3e166b0d.js.map